(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function c(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=c(t);fetch(t.href,n)}})();const d="32b6ed7f951d4899b2b41de26fc8ab39",u="https://api.openweathermap.org/data/2.5/weather?units=metric&",o={searchBox:document.querySelector("input"),searchBtn:document.querySelector("#search-button"),gpsBtn:document.querySelector("#gps-button"),weather:document.querySelector("#weather"),weatherIcon:document.querySelector("#weather-icon"),error:document.querySelector("#error"),city:document.querySelector("#city"),temp:document.querySelector("#temp"),humidity:document.querySelector("#humidity"),windSpeed:document.querySelector("#windSpeed")},s={},m=6e5,p=e=>{const r=Date.now();return s[e]&&r-s[e].timestamp<m},h=()=>{o.error.style.display="block",o.weather.style.display="none"},i=e=>{o.city.innerHTML=e.name,o.temp.innerHTML=`${Math.round(e.main.temp)}Â°c`,o.humidity.innerHTML=`${e.main.humidity}%`,o.windSpeed.innerHTML=`${e.wind.speed} km/h`,o.weatherIcon.src=`/weather-app-img/images/${e.weather[0].main.toLowerCase()}.png`,o.weather.style.display="block",o.error.style.display="none"},y=async e=>{if(p(e)){i(s[e].data);return}const r=await fetch(`${u}q=${e}&appid=${d}`);if(!r.ok)h();else{const c=await r.json();s[e]={data:c,timestamp:Date.now()},i(c)}},f=async(e,r)=>{const c=`${e}-${r}`;if(p(c)){i(s[c].data);return}const t=await(await fetch(`${u}lat=${e}&lon=${r}&appid=${d}`)).json();s[c]={data:t,timestamp:Date.now()},i(t)};o.searchBtn.addEventListener("click",()=>{y(o.searchBox.value),console.log(s)});"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{const{latitude:r,longitude:c}=e.coords;o.gpsBtn.addEventListener("click",()=>{f(r,c)})},e=>{console.error(`Error getting location: ${e.message}`)}):console.error("Geolocation is not supported");
